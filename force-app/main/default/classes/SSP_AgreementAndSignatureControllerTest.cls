@isTest
private class SSP_AgreementAndSignatureControllerTest implements HttpCalloutMock {
    private static SSP_Application__c createApplication(Integer caseNumber){
        
        Account acc = new Account(Name='TestName');
        insert acc;
        Id recordTypeId = Schema.SObjectType.SSP_Application__c.getRecordTypeInfosByDeveloperName().get('Case').getRecordTypeId();
        SSP_Application__c application = new SSP_Application__c(
                                                RecordTypeId = recordTypeId,
                                                DCCaseNumber__c =caseNumber,
                                                Account__c = acc.Id);
        
        insert application;
        return application;
    } 
    
    @isTest
    public static void testAgreementAndSignatureController() {
        Test.setMock(HttpCalloutMock.class, new SSP_AgreementAndSignatureControllerTest());
		Test.startTest();
        SSP_LightningResponse response = SSP_AgreementAndSignatureController.fetchSignatureData('600003626');
        System.assertNotEquals(null, response);
        Test.stopTest();
    }

    public HTTPResponse respond(HTTPRequest req) {
        // Create a test response
        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'application/json');
        res.setBody('{    "AckResponse":null,    "Payload":{       "PastApplications":[          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":"65DC063A-53C0-FE59-455C-39F5FE0E8200",             "ProgramAppliedFor":"MA;SN",             "ApplicationReceivedDate":"2020-06-25",             "ApplicationNumber":600003526,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":"EE9B4C95-FC54-62E1-BCE2-39F612088639",             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-06-29",             "ApplicationNumber":600003626,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":"0C86467E-CD41-27A6-3A39-39F6266F49AB",             "ProgramAppliedFor":"CC",             "ApplicationReceivedDate":"2020-07-03",             "ApplicationNumber":600003882,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-08",             "ApplicationNumber":600004071,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-14",             "ApplicationNumber":600004353,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-15",             "ApplicationNumber":600004374,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-15",             "ApplicationNumber":600004378,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-15",             "ApplicationNumber":600004380,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-15",             "ApplicationNumber":600004387,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-15",             "ApplicationNumber":600004391,             "CaseNumber":112300047,             "IndividualId":360797376          },          {             "IsDMSAnnuitiesBeneficiary":null,             "DeclrtnfAnnuitiesAcceptanceCode":null,             "IsRegisteredToVote":"N",             "IsApplicantAgreeToWorkRegister":null,             "IsRenewalConsent":"Y",             "IsAgreeingToLTCResourceTransferConsent":null,             "IsAgreeingToMedicaidPenalty":null,             "CaseStatusCode":"AP",             "DMSId":null,             "ProgramAppliedFor":"KT",             "ApplicationReceivedDate":"2020-07-15",             "ApplicationNumber":600004397,             "CaseNumber":112300047,             "IndividualId":360797376          }       ]    },    "role":"",    "miscelleanousParameter":"",    "applicationID":"",    "mode":"",    "programCode":"",    "individualIds":"",    "primaryApplicantIndividualId":"360797376",    "caseNumber":"0",    "viewName":"PastApplications" } ');
        res.setStatusCode(200);
        return res;
    }
}